/* =========================================
   1. VÄRIT JA MUUTTUJAT
   ========================================= */
:root { 
    --p: #4A9E9C;       /* Pääväri: Murrettu Turkoosi */
    --accent: #FF8C42;  /* Tehoste: Energinen Oranssi */
    --bg: #F9FBFB;      /* Tausta: Raikas luonnonvalkoinen */
    --text: #2D3131;    /* Teksti: Pehmeä hiilenmusta */
    --sec-bg: #E2E8E8;  /* Toissijainen: Viileä vaaleanharmaa */
    --white: #ffffff;   /* Korttien tausta */
    --danger: #d64541;  /* Poisto: Hieman pehmennetty punainen */
    --danger-light: #fff5f5; /* Vaaravyöhykkeen tausta */
    --danger-border: #ffcccc; /* Vaaravyöhykkeen reunus */
    --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --brand-font: 'Montserrat', sans-serif; /* Logo-fontti */
}

/* =========================================
   2. PERUSASETUKSET & LAYOUT
   ========================================= */
body { 
    font-family: var(--font-stack);
    background: var(--bg); 
    color: var(--text); 
    padding: 20px; 
    line-height: 1.4; 
    margin: 0;
}

.container { max-width: 600px; margin: 0 auto; }

/* Peruskortti (valkoinen laatikko varjolla) */
.card { 
    background: var(--white); 
    padding: 20px; 
    border-radius: 12px; 
    box-shadow: 0 4px 15px rgba(74, 158, 156, 0.1); 
    margin-bottom: 20px; 
}

/* Erottimet ja apuluokat */
hr { border: 0; border-top: 1px solid var(--sec-bg); margin: 15px 0; }
.empty-msg { font-size: 0.8em; color: #889999; text-align: center; }

.flex { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    gap: 10px; 
}

/* =========================================
   3. TYPOGRAFIA & LOGO
   ========================================= */
h1, h2, h3 { color: var(--p); margin-top: 0; font-weight: 700; }

/* CSS-pohjainen Logo (Montserrat) */
.app-logo {
    display: flex; align-items: center; gap: 8px;
    user-select: none; /* Estää maalauksen */
}

.logo-text {
    font-family: var(--brand-font);
    font-weight: 800; /* Extra Bold */
    font-size: 1.8em;
    color: var(--text);
    text-transform: uppercase;
    letter-spacing: 1px;
    line-height: 1;
}

.logo-badge {
    font-family: var(--brand-font);
    font-weight: 700; /* Bold */
    font-size: 1.1em;
    background: var(--p);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    line-height: 1;
    transform: translateY(-2px);
    box-shadow: 2px 2px 0 rgba(0,0,0,0.1); /* Pieni kova varjo */
}

/* Headerin asettelu */
.header-row {
    display: flex; justify-content: space-between; align-items: center;
}

/* =========================================
   4. DASHBOARD & YHTEENVETO
   ========================================= */
/* Koko asunnon tilanne -laatikko */
.overall-summary {
    background: #e0f2f1; /* Todella vaalea turkoosi */
    border: 1px solid var(--p);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
}

/* Klikattava kortti efekti */
.hover-card {
    transition: transform 0.2s, box-shadow 0.2s;
}
.hover-card:active { transform: scale(0.98); }

/* Tilastoruudukko (3 saraketta, esim. Alku/Poistettu/Tavoite) */
.stats-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr;
    gap: 8px; margin-top: 15px;
}

.stat-box {
    background: white; padding: 8px; border-radius: 6px;
    text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.stat-label {
    display: block; font-size: 0.7em; color: #666; 
    text-transform: uppercase; letter-spacing: 0.5px;
}
.stat-value {
    display: block; font-size: 1.1em; font-weight: bold; 
    color: var(--text); margin-top: 2px;
}

/* Lajitteluvalikko */
.sort-container {
    display: flex; justify-content: flex-end; align-items: center;
    margin-bottom: 15px; gap: 10px; font-size: 0.9em; color: #666;
}
.sort-select {
    padding: 8px 12px; border: 1px solid var(--p); border-radius: 6px;
    background: var(--white); color: var(--text); font-size: 0.95em; cursor: pointer; outline: none;
}

/* =========================================
   5. HUONEET & KATEGORIAT LISTASSA
   ========================================= */
/* Huonekortti etusivulla */
.room-section { 
    border: 2px solid var(--p); 
    border-radius: 12px; padding: 15px; 
    margin-bottom: 20px; background: var(--white); 
}

.room-summary { 
    background: #f0f7f7; padding: 10px; border-radius: 8px; 
    margin-bottom: 15px; border: 1px dashed var(--p); color: var(--text);
}

/* Yksittäinen kategoria listalla */
.category-item { 
    background: var(--bg); border: 1px solid var(--sec-bg); 
    padding: 15px; border-radius: 8px; margin-top: 10px; 
}
.category-item.locked { 
    border-color: var(--p); background: #eef9f9; 
}

/* Edistymispalkit */
.bar-bg { 
    background: var(--sec-bg); height: 12px; 
    border-radius: 6px; margin: 8px 0; overflow: hidden; 
}
.bar-fill { 
    background: var(--p); height: 100%; width: 0%; transition: width 0.3s; 
}
.bar-room { background: var(--p); }

/* Kategorioiden lukumäärä -badge */
.cat-count-badge {
    background: var(--white); border: 1px solid var(--sec-bg); 
    color: #666; padding: 2px 8px; border-radius: 12px; 
    font-size: 0.75em; white-space: nowrap;
}

/* =========================================
   6. MODAALIT (IKKUNAT)
   ========================================= */
.modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(255, 255, 255, 0.98); z-index: 1000;
    display: flex; justify-content: center; align-items: center;
    padding: 20px; box-sizing: border-box; overflow-y: auto;
}
.modal.hidden { display: none; }

.modal-content {
    width: 100%; max-width: 500px; background: white; height: 100%;
    display: flex; flex-direction: column; justify-content: space-between;
}
.modal-header { 
    text-align: center; margin-bottom: 20px; padding-bottom: 10px; 
    border-bottom: 1px solid var(--sec-bg); 
}
.modal-footer { margin-top: auto; padding-top: 10px; }

/* --- Modaalin lomakekentät --- */
.modal-input-group { margin-bottom: 20px; }
.modal-label { 
    display: block; margin-bottom: 8px; font-weight: bold; color: var(--p); 
}
.modal-input {
    width: 100%; padding: 15px; font-size: 1.1em;
    border: 2px solid var(--sec-bg); border-radius: 8px;
    box-sizing: border-box; outline: none; transition: border-color 0.2s;
}
.modal-input:focus { border-color: var(--p); }

/* --- Modaalin erikoisnäkymät --- */

/* Tiivistetty tavoitekortti (Iso numero) */
.big-stat-display {
    text-align: center; margin: 10px 0; padding: 15px;
    background: var(--bg); border-radius: 12px; border: 2px solid var(--p);
    display: flex; flex-direction: column; justify-content: center;
}
.big-number { font-size: 3.5em; font-weight: 800; color: var(--p); line-height: 1; }
.goal-number { font-size: 1.5em; color: #999; font-weight: normal; }
.sub-label { 
    color: #666; font-size: 0.8em; text-transform: uppercase; 
    letter-spacing: 1px; margin-bottom: 5px; 
}

/* Tilastonäkymän tarkempi lista (Huone-erittely) */
.stats-list-container {
    background: #f9f9f9; padding: 15px; 
    border-radius: 12px; border: 1px solid #eee;
}
.stats-detailed-row {
    background: white; padding: 12px; 
    border-radius: 8px; border: 1px solid #eee; margin-bottom: 10px;
}
.stats-mini-grid {
    display: flex; justify-content: space-between; 
    font-size: 0.8em; color: #666; margin-top: 5px;
}

/* Asetus-modaalin osiot */
.settings-section {
    margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee;
}
.settings-label {
    font-size: 0.85em; text-transform: uppercase; color: #888;
    margin-bottom: 10px; display: block; letter-spacing: 1px;
}
.settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

/* Vaaravyöhyke (Nollaus) */
.danger-zone {
    margin-top: 30px; padding: 15px; 
    background: var(--danger-light); border: 1px solid var(--danger-border); 
    border-radius: 8px; text-align: center;
}

/* =========================================
   7. NAPIT & KONTROLLIT
   ========================================= */
/* Yleinen nappityyli */
button { 
    padding: 10px 15px; border: none; border-radius: 6px; 
    background: var(--p); color: white; cursor: pointer; font-weight: bold; 
    transition: background 0.2s, transform 0.1s; font-family: var(--font-stack);
}
button:hover { opacity: 0.9; }
button:active { transform: translateY(1px); }

/* --- Päänäkymän napit --- */

/* Asetukset-ikoni oikeassa yläkulmassa */
.btn-settings-icon {
    background: transparent; border: none; font-size: 1.8em;
    padding: 5px; color: #999; line-height: 1; margin: 0;
}
.btn-settings-icon:hover { 
    color: var(--p); transform: rotate(90deg); background: transparent; opacity: 1;
}

/* Tähti (Kiinnitä huone) */
.btn-star {
    background: transparent; border: none; font-size: 1.5em; 
    cursor: pointer; color: #ccc; padding: 0 5px; line-height: 1;
}
.btn-star.active { color: #f1c40f; transform: scale(1.1); opacity: 1; }

/* Iso "Lisää uusi kategoria/huone" -laatikko listassa */
.btn-add-trigger {
    width: 100%; padding: 15px; background: white; 
    border: 2px dashed var(--p); color: var(--p); 
    font-weight: bold; border-radius: 8px; margin-top: 15px;
}
.btn-add-trigger:hover { background: #f0f9f9; opacity: 1; }


/* --- Modaalinen napit --- */

/* Sulje modaali (Valmis) */
.btn-close-modal {
    width: 100%; padding: 18px; font-size: 1.2em; 
    background: var(--p); border-radius: 12px;
}

/* Tallenna / Peruuta ryhmä (vierekkäin) */
.modal-btn-group {
    display: flex; gap: 10px; margin-top: auto; padding-top: 20px;
}
.btn-save { flex: 2; background: var(--p); padding: 15px; font-size: 1.1em; border-radius: 8px; }
.btn-cancel { 
    flex: 1; background: white; border: 2px solid #ccc; 
    color: #666; padding: 15px; font-size: 1.1em; border-radius: 8px; 
}

/* WhatsApp Jaa-nappi */
.btn-share {
    width: 100%; 
    background: linear-gradient(135deg, #25D366 0%, #128C7E 100%); 
    color: white; padding: 15px; font-size: 1.1em; 
    border-radius: 8px; margin-bottom: 10px; 
    display: flex; align-items: center; justify-content: center; gap: 10px;
}

/* Import / Export / Copy / Paste napit */
.btn-export, .btn-import, .btn-sec { 
    background: white; 
    color: var(--p); 
    border: 2px solid var(--p); 
    font-weight: bold;
}
.btn-export:hover, .btn-import:hover, .btn-sec:hover {
    background: var(--p);
    color: white;
}

/* Nollausnappi (Vaaravyöhyke) */
.btn-reset {
    background: white; color: var(--danger); 
    border: 1px solid var(--danger); width: 100%; margin-top: 10px;
}
.btn-reset:hover { background: var(--danger); color: white; opacity: 1; }


/* --- Lukumäärän säätö (Isot napit) --- */
.control-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr; 
    gap: 10px; margin-bottom: 20px;
}
.btn-large {
    padding: 0; height: 65px; font-size: 1.4em; border-radius: 12px;
    box-shadow: 0 4px 0 rgba(0,0,0,0.1); 
    display: flex; align-items: center; justify-content: center;
}
.btn-large:active { transform: translateY(4px); box-shadow: none; opacity: 1; }

/* Plus: Oranssi */
.btn-large.plus { background: var(--accent); color: white; border: 1px solid rgba(0,0,0,0.1); }

/* Minus: Valkoinen, mutta nyt Turkoosilla (pääväri) reunalla */
.btn-large.minus { 
    background: white; 
    color: var(--p); 
    border: 2px solid var(--p); 
}

/* Korjausnapit (Pienemmät, 4 saraketta) */
.adjust-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; 
    gap: 8px; margin-top: 8px;
}
.btn-adjust {
    padding: 0; height: 50px; font-size: 1.1em; 
    border-radius: 8px; 
    background: white; 
    border: 2px solid var(--p); /* Turkoosi reuna */
    color: var(--p); /* Turkoosi teksti */
}
.btn-adjust:active { background: #eee; transform: translateY(2px); opacity: 1; }


/* --- Lukitus ja Poisto (Toissijaiset toiminnot) --- */
.btn-lock { 
    width: 100%; font-size: 0.9em; padding: 12px; 
    background: white; color: var(--p); 
    border: 1px solid var(--p); margin-bottom: 10px; 
}
.btn-unlock { 
    margin-top: 20px; padding: 15px; font-size: 1em; 
    width: 100%; background: var(--accent); 
}

.btn-delete-room {
    width: 100%; background: white; 
    border: 2px solid var(--danger); color: var(--danger);
    padding: 12px; font-weight: bold; border-radius: 8px;
    margin-top: 20px; text-transform: uppercase; 
    font-size: 0.9em; letter-spacing: 0.5px;
}
.btn-delete-room:hover { background: var(--danger); color: white; opacity: 1; }
.btn-delete-room:disabled {
    background-color: #f5f5f5; border-color: #ddd; 
    color: #aaa; cursor: not-allowed; pointer-events: none;
}
.delete-info-text {
    font-size: 0.85em; color: var(--accent); 
    text-align: center; margin-bottom: 5px; display: block; font-weight: 500;
}

/* --- GRAND FINALE & VICTORY --- */

/* Kultainen tila Dashboardille */
.gold-mode {
    background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%);
    border: 2px solid #d4af37;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
    color: #4a3b00;
    animation: pulse-gold 3s infinite;
}
.gold-mode h2, .gold-mode strong, .gold-mode span, .gold-mode .stat-label, .gold-mode .stat-value {
    color: #4a3b00 !important;
    border-color: rgba(0,0,0,0.1) !important;
}
.gold-mode .bar-bg { background: rgba(255,255,255,0.5); }
.gold-mode .bar-fill { background: #fff; }

@keyframes pulse-gold {
    0% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
    50% { transform: scale(1.02); box-shadow: 0 0 20px rgba(255, 215, 0, 0.6); }
    100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }
}

/* Victory Modal (Tumma teema) */
.victory-modal-content {
    background: #1a1a1a;
    color: #fff;
    text-align: center;
    border: 2px solid #FFD700;
}
.victory-title {
    font-size: 2.5em;
    font-weight: 900;
    color: #FFD700;
    text-transform: uppercase;
    margin-bottom: 10px;
    letter-spacing: 2px;
}
.victory-stat-big {
    font-size: 4em;
    font-weight: 800;
    color: #fff;
    line-height: 1;
    margin: 20px 0;
}
.victory-subtitle {
    color: #ccc;
    font-size: 1.1em;
    text-transform: uppercase;
    letter-spacing: 1px;
}
.btn-victory-share {
    background: #FFD700;
    color: #000;
    font-size: 1.2em;
    padding: 15px 30px;
    border-radius: 50px;
    font-weight: bold;
    margin-top: 30px;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
}
.btn-victory-close {
    background: transparent;
    border: 1px solid #555;
    color: #888;
    margin-top: 15px;
    padding: 10px 20px;
}

/* Konfetti-efekti (CSS only) */
.confetti {
    position: absolute;
    width: 10px; height: 10px;
    background-color: #FFD700;
    animation: confetti-fall 3s linear infinite;
    top: -10px;
    z-index: 999;
}
@keyframes confetti-fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(80vh) rotate(720deg); opacity: 0; }
}

/* --- HUONEIDEN KULTAINEN TILA --- */
.room-section.room-gold {
    background: linear-gradient(135deg, #fffbf0 0%, #fff 100%);
    border: 2px solid #FFD700 !important;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.25);
    position: relative;
    overflow: hidden;
}

/* Pieni hohto-efekti kultaiselle huoneelle */
.room-section.room-gold::after {
    content: '';
    position: absolute;
    top: 0; left: -100%;
    width: 50%; height: 100%;
    background: linear-gradient(to right, transparent, rgba(255,255,255,0.8), transparent);
    transform: skewX(-25deg);
    animation: shine 6s infinite;
}

@keyframes shine {
    0% { left: -100%; }
    20% { left: 200%; }
    100% { left: 200%; }
}

/* --- VICTORY CARD (YLEINEN) --- */
.victory-card-container {
    background: #1a1a1a;
    border: 4px solid #FFD700;
    border-radius: 20px;
    padding: 30px;
    text-align: center;
    color: #fff;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    position: relative;
    /* Tämä tekee siitä "korttimaisen" screenshottia varten */
    max-width: 400px;
    margin: 0 auto;
}

.victory-badge {
    display: inline-block;
    background: #FFD700;
    color: #000;
    font-weight: 900;
    padding: 5px 15px;
    border-radius: 50px;
    text-transform: uppercase;
    font-size: 0.9em;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(255, 215, 0, 0.4);
}